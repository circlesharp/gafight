app:
  description: ''
  icon: 🤖
  icon_background: '#FFEAD5'
  mode: workflow
  name: 暴力迭代
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.6@dd589dc093c8084925858034ab5ec1fdf0d33819f43226c2f8c4a749a9acbbb2
    version: null
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: code
      id: 1759412718692-source-1759412730305-target
      selected: false
      source: '1759412718692'
      sourceHandle: source
      target: '1759412730305'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 1759412730305-source-1759413082911-target
      selected: false
      source: '1759412730305'
      sourceHandle: source
      target: '1759413082911'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1759413082911-source-1759415784773-target
      source: '1759413082911'
      sourceHandle: source
      target: '1759415784773'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: iteration
      id: 1759415784773-true-1759414348448-target
      source: '1759415784773'
      sourceHandle: 'true'
      target: '1759414348448'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1759413082911-source-1759415987042-target
      source: '1759413082911'
      sourceHandle: source
      target: '1759415987042'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: iteration
      id: 1759415987042-true-17594160185800-target
      source: '1759415987042'
      sourceHandle: 'true'
      target: '17594160185800'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: variable-aggregator
      id: 1759414348448-source-1759416094201-target
      source: '1759414348448'
      sourceHandle: source
      target: '1759416094201'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: iteration
        targetType: variable-aggregator
      id: 17594160185800-source-1759416094201-target
      source: '17594160185800'
      sourceHandle: source
      target: '1759416094201'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: variable-aggregator
        targetType: code
      id: 1759416094201-source-1759416269359-target
      source: '1759416094201'
      sourceHandle: source
      target: '1759416269359'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1759416269359-source-1759416470951-target
      source: '1759416269359'
      sourceHandle: source
      target: '1759416470951'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1759414348448'
        sourceType: iteration-start
        targetType: llm
      id: 1759414348448start-source-1759418771238-target
      source: 1759414348448start
      sourceHandle: source
      target: '1759418771238'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '17594160185800'
        sourceType: iteration-start
        targetType: llm
      id: 1759416018580start-source-1759419002309-target
      source: 1759416018580start
      sourceHandle: source
      target: '1759419002309'
      targetHandle: target
      type: custom
      zIndex: 1002
    nodes:
    - data:
        selected: false
        title: 开始
        type: start
        variables:
        - default: '21'
          hint: ''
          label: n
          max_length: 48
          options: []
          placeholder: ''
          required: true
          type: number
          variable: n
      height: 88
      id: '1759412718692'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "\nfunction main({n}) {\n    const randomArr = []\n    for (let i =\
          \ 0; i < n; i++) {\n        randomArr.push(Math.random())\n    }\n    return\
          \ {\n        result: randomArr\n    }\n}\n"
        code_language: javascript
        outputs:
          result:
            children: null
            type: array[number]
        selected: false
        title: 数据处处理
        type: code
        variables:
        - value_selector:
          - '1759412718692'
          - n
          value_type: number
          variable: n
      height: 52
      id: '1759412730305'
      position:
        x: 382
        y: 282
      positionAbsolute:
        x: 382
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "const N = 2\n\nfunction main({source}) {\n    const rst = {}\n    const\
          \ sourceLen = source.length\n\n    for (let i = 0; i < N; i++) {\n     \
          \   rst[i] = []\n    }\n\n    for (let i = 0; i < sourceLen; i++) {\n  \
          \      const mod = i % N\n        rst[mod].push(source[i])\n    }\n\n\n\
          \    return {\n        result: rst,\n        var_1: rst[0],\n        var_2:\
          \ rst[1],\n    }\n}"
        code_language: javascript
        outputs:
          result:
            children: null
            type: object
          var_1:
            children: null
            type: array[number]
          var_2:
            children: null
            type: array[number]
        selected: false
        title: 数据分发
        type: code
        variables:
        - value_selector:
          - '1759412730305'
          - result
          value_type: array[number]
          variable: source
      height: 52
      id: '1759413082911'
      position:
        x: 684
        y: 282
      positionAbsolute:
        x: 684
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        error_handle_mode: continue-on-error
        height: 166
        is_parallel: true
        iterator_input_type: array[number]
        iterator_selector:
        - '1759413082911'
        - var_1
        output_selector:
        - '1759418771238'
        - structured_output
        - llmText
        output_type: array[object]
        parallel_nums: 10
        selected: false
        start_node_id: 1759414348448start
        title: 迭代
        type: iteration
        width: 386
      height: 166
      id: '1759414348448'
      position:
        x: 1319.4198035863355
        y: 207.2034496054149
      positionAbsolute:
        x: 1319.4198035863355
        y: 207.2034496054149
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 386
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1759414348448start
      parentId: '1759414348448'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 1343.4198035863355
        y: 275.2034496054149
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 9782d071-d8b9-4936-bd9a-6b72070746c4
            value: ''
            varType: array[number]
            variable_selector:
            - '1759413082911'
            - var_1
          id: 'true'
          logical_operator: and
        selected: false
        title: 条件分支
        type: if-else
      height: 124
      id: '1759415784773'
      position:
        x: 986
        y: 282
      positionAbsolute:
        x: 986
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 239c89d8-8a21-4cc7-9fc9-c80e5910f9ef
            value: ''
            varType: array[number]
            variable_selector:
            - '1759413082911'
            - var_2
          id: 'true'
          logical_operator: and
        selected: false
        title: 条件分支 2
        type: if-else
      height: 124
      id: '1759415987042'
      position:
        x: 986
        y: 445
      positionAbsolute:
        x: 986
        y: 445
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        error_handle_mode: terminated
        height: 166
        is_parallel: true
        iterator_input_type: array[number]
        iterator_selector:
        - '1759413082911'
        - var_2
        output_selector:
        - '1759419002309'
        - structured_output
        - llmText
        output_type: array[object]
        parallel_nums: 10
        selected: false
        start_node_id: 1759416018580start
        title: 迭代 (1)
        type: iteration
        width: 386
      height: 166
      id: '17594160185800'
      position:
        x: 1306.7492132545312
        y: 445
      positionAbsolute:
        x: 1306.7492132545312
        y: 445
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 386
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1759416018580start
      parentId: '17594160185800'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 1330.7492132545312
        y: 513
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        advanced_settings:
          group_enabled: true
          groups:
          - groupId: c8b5bfa7-3389-44b4-9fc9-31378c749f82
            group_name: Group1
            output_type: array[string]
            variables:
            - - '1759414348448'
              - output
          - groupId: 55990b97-c6eb-4a67-b8f2-179cd8238f04
            group_name: Group2
            output_type: array[number]
            variables:
            - - '17594160185800'
              - output
        output_type: any
        selected: false
        title: 变量聚合器
        type: variable-aggregator
        variables: []
      height: 162
      id: '1759416094201'
      position:
        x: 1773.7642578110208
        y: 349.72120103293514
      positionAbsolute:
        x: 1773.7642578110208
        y: 349.72120103293514
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "\nfunction main({arg1, arg2}) {\n    const rst1 = arg1.output\n   \
          \ const rst2 = arg2.output\n\n    const result = [...rst1, ...rst2]\n\n\
          \    return {\n        result\n    }\n}\n"
        code_language: javascript
        outputs:
          result:
            children: null
            type: array[string]
        selected: false
        title: 代码执行 5
        type: code
        variables:
        - value_selector:
          - '1759416094201'
          - Group1
          value_type: object
          variable: arg1
        - value_selector:
          - '1759416094201'
          - Group2
          value_type: object
          variable: arg2
      height: 52
      id: '1759416269359'
      position:
        x: 2075.764257811021
        y: 349.72120103293514
      positionAbsolute:
        x: 2075.764257811021
        y: 349.72120103293514
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        outputs:
        - value_selector:
          - '1759416269359'
          - result
          value_type: string
          variable: result
        selected: false
        title: 结束
        type: end
      height: 88
      id: '1759416470951'
      position:
        x: 2377.764257811021
        y: 349.72120103293514
      positionAbsolute:
        x: 2377.764257811021
        y: 349.72120103293514
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        isInIteration: true
        isInLoop: false
        iteration_id: '1759414348448'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 8a86e1c0-6ace-416e-b3a7-db69187821e1
          role: system
          text: '给你一个随机数{{#1759414348448.item#}}，随意选几个数字，写首打油诗。

            输出结果保存在llmText'
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              llmText:
                type: string
            required: []
            type: object
        structured_output_enabled: true
        title: LLM
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1759418771238'
      parentId: '1759414348448'
      position:
        x: 128
        y: 58
      positionAbsolute:
        x: 1447.4198035863355
        y: 265.2034496054149
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        isInIteration: true
        isInLoop: false
        iteration_id: '17594160185800'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: aa751a76-6ef2-4571-99ed-353a72c6ef4a
          role: system
          text: '从{{#17594160185800.item#}}随机选6个数字，写成中文。

            比如：232.01232133，从中随机挑6个数字（如果挑的是：012321），写成：零一二三二一

            输出结果保存在 llmText'
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              llmText:
                type: string
            required: []
            type: object
        structured_output_enabled: true
        title: LLM 2
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1759419002309'
      parentId: '17594160185800'
      position:
        x: 128
        y: 68
      positionAbsolute:
        x: 1434.7492132545312
        y: 513
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    viewport:
      x: -514.8878320299189
      y: 80.15091907035837
      zoom: 0.8999999999999999
  rag_pipeline_variables: []
