app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: testæ§åˆ¶æµ(01 è¿­ä»£)
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.6@dd589dc093c8084925858034ab5ec1fdf0d33819f43226c2f8c4a749a9acbbb2
    version: null
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: bowenliang123/md_exporter:2.0.0@13e1aca1995328e41c080ff9f7f6d898df60ff74a3f4d98d6de4b18ab5b92c2e
    version: null
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: start
        targetType: document-extractor
      id: 1759214872613-source-1759408171759-target
      selected: false
      source: '1759214872613'
      sourceHandle: source
      target: '1759408171759'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: end
      id: 1759412300732-source-1759412326330-target
      selected: false
      source: '1759412300732'
      sourceHandle: source
      target: '1759412326330'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: document-extractor
        targetType: code
      id: 1759408171759-source-1759479042369-target
      source: '1759408171759'
      sourceHandle: source
      target: '1759479042369'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: iteration
      id: 1759479042369-source-1759408701421-target
      selected: false
      source: '1759479042369'
      sourceHandle: source
      target: '1759408701421'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: tool
      id: 1759479424068-source-1759412300732-target
      source: '1759479424068'
      sourceHandle: source
      target: '1759412300732'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: 1759408701421-source-1759479424068-target
      source: '1759408701421'
      sourceHandle: source
      target: '1759479424068'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1759408701421'
        sourceType: iteration-start
        targetType: llm
      id: 1759408701421start-source-1759481556478-target
      source: 1759408701421start
      sourceHandle: source
      target: '1759481556478'
      targetHandle: target
      type: custom
      zIndex: 1002
    nodes:
    - data:
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          hint: ''
          label: inputFile
          max_length: 48
          options: []
          placeholder: ''
          required: true
          type: file
          variable: inputFile
      height: 88
      id: '1759214872613'
      position:
        x: -37
        y: 366
      positionAbsolute:
        x: -37
        y: 366
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        is_array_file: false
        selected: false
        title: æ–‡æ¡£æå–å™¨
        type: document-extractor
        variable_selector:
        - '1759214872613'
        - inputFile
      height: 92
      id: '1759408171759'
      position:
        x: 265
        y: 366
      positionAbsolute:
        x: 265
        y: 366
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        error_handle_mode: continue-on-error
        height: 176
        is_parallel: true
        iterator_input_type: array[object]
        iterator_selector:
        - '1759479042369'
        - result
        output_selector:
        - '1759481556478'
        - structured_output
        - storyObj
        output_type: array[object]
        parallel_nums: 10
        selected: false
        start_node_id: 1759408701421start
        title: è¿­ä»£
        type: iteration
        width: 445
      height: 176
      id: '1759408701421'
      position:
        x: 932.8972461089627
        y: 366
      positionAbsolute:
        x: 932.8972461089627
        y: 366
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 445
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1759408701421start
      parentId: '1759408701421'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 956.8972461089627
        y: 434
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        is_team_authorization: true
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: 'Input text of single or multiple Markdown tables, with worksheets
              supported. All the heading texts (eg. #, ##) will be used as worksheet
              names in order.'
            ja_JP: 'Input text of single or multiple Markdown tables, with worksheets
              supported. All the heading texts (eg. #, ##) will be used as worksheet
              names in order.'
            pt_BR: 'Input text of single or multiple Markdown tables, with worksheets
              supported. All the heading texts (eg. #, ##) will be used as worksheet
              names in order.'
            zh_Hans: 'å•ä¸ªæˆ–å¤šä¸ª Markdown è¡¨æ ¼çš„æ–‡æœ¬è¾“å…¥ï¼Œæ”¯æŒå·¥ä½œè¡¨ã€‚æ‰€æœ‰æ ‡é¢˜æ–‡æœ¬ï¼ˆä¾‹å¦‚ #, ##ï¼‰å°†ä¾æ¬¡ç”¨ä½œå·¥ä½œè¡¨åç§°ã€‚'
          label:
            en_US: Markdown table text
            ja_JP: Markdown table text
            pt_BR: Markdown table text
            zh_Hans: Markdown è¡¨æ ¼æ–‡æœ¬
          llm_description: ''
          max: null
          min: null
          name: md_text
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: 'true'
          form: form
          human_description:
            en_US: Convert cell values into text type to void decimal precision loss
              in display
            ja_JP: Convert cell values into text type to void decimal precision loss
              in display
            pt_BR: Convert cell values into text type to void decimal precision loss
              in display
            zh_Hans: è½¬æ¢å•å…ƒæ ¼å€¼ä¸ºæ–‡æœ¬ç±»å‹ï¼Œé¿å…æ˜¾ç¤ºæ—¶çš„å°æ•°ç²¾åº¦ä¸¢å¤±
          label:
            en_US: Enforce text type
            ja_JP: Enforce text type
            pt_BR: Enforce text type
            zh_Hans: å¼ºåˆ¶å•å…ƒæ ¼å€¼ä¸ºæ–‡æœ¬ç±»å‹
          llm_description: Whether to convert cell values into string type, default
            to "true"
          max: null
          min: null
          name: force_text_value
          options:
          - icon: ''
            label:
              en_US: 'Yes'
              ja_JP: 'Yes'
              pt_BR: 'Yes'
              zh_Hans: æ˜¯
            value: 'true'
          - icon: ''
            label:
              en_US: 'No'
              ja_JP: 'No'
              pt_BR: 'No'
              zh_Hans: å¦
            value: 'false'
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: select
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Optional custom output file name, and the filename suffix is not
              required.
            ja_JP: Optional custom output file name, and the filename suffix is not
              required.
            pt_BR: Optional custom output file name, and the filename suffix is not
              required.
            zh_Hans: å¯é€‰çš„è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶åï¼Œåç¼€åæ— éœ€æŒ‡å®š
          label:
            en_US: Output Filename
            ja_JP: Output Filename
            pt_BR: Output Filename
            zh_Hans: è¾“å‡ºæ–‡ä»¶å
          llm_description: ''
          max: null
          min: null
          name: output_filename
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        params:
          force_text_value: ''
          md_text: ''
          output_filename: ''
        provider_id: bowenliang123/md_exporter/md_exporter
        provider_name: bowenliang123/md_exporter/md_exporter
        provider_type: builtin
        selected: false
        title: Markdown è½¬ XLSX æ–‡ä»¶
        tool_configurations:
          force_text_value:
            type: constant
            value: 'true'
        tool_description: å°† Markdown è¡¨æ ¼è½¬æ¢ä¸º XLSX æ–‡ä»¶çš„å·¥å…·
        tool_label: Markdown è½¬ XLSX æ–‡ä»¶
        tool_name: md_to_xlsx
        tool_node_version: '2'
        tool_parameters:
          md_text:
            type: mixed
            value: '{{#1759479424068.result#}}'
          output_filename:
            type: mixed
            value: test
        type: tool
      height: 88
      id: '1759412300732'
      position:
        x: 1783.366564365272
        y: 366
      positionAbsolute:
        x: 1783.366564365272
        y: 366
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        outputs:
        - value_selector:
          - '1759412300732'
          - files
          value_type: array[file]
          variable: files
        selected: false
        title: ç»“æŸ
        type: end
      height: 88
      id: '1759412326330'
      position:
        x: 2093.2935771774214
        y: 366
      positionAbsolute:
        x: 2093.2935771774214
        y: 366
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "\nfunction main({mdText}) {\n    const tableJson = markdownTableToJson(mdText)\n\
          \    return {\n        result: tableJson\n    }\n}\n\nfunction markdownTableToJson(markdown)\
          \ {\n  const lines = markdown.trim().split('\\n');\n\n  // Extract header\
          \ row\n  const headerLine = lines[0];\n  const headers = headerLine.split('|').map(h\
          \ => h.trim()).filter(h => h !== '');\n\n  // Skip the separator line (lines[1])\n\
          \  const dataLines = lines.slice(2);\n\n  const result = [];\n\n  dataLines.forEach(line\
          \ => {\n    const values = line.split('|').map(v => v.trim()).filter(v =>\
          \ v !== '');\n    const rowObject = {};\n    headers.forEach((header, index)\
          \ => {\n      rowObject[header] = values[index];\n    });\n    result.push(rowObject);\n\
          \  });\n\n  return result\n}\n"
        code_language: javascript
        outputs:
          result:
            children: null
            type: array[object]
        selected: false
        title: mdTable2Json
        type: code
        variables:
        - value_selector:
          - '1759408171759'
          - text
          value_type: string
          variable: mdText
      height: 52
      id: '1759479042369'
      position:
        x: 592.6514803962633
        y: 366
      positionAbsolute:
        x: 592.6514803962633
        y: 366
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "function main({originStory, aiBrief}) {\n    const n = originStory.length\n\
          \    const storyObj = {}\n    const storyArr = []\n\n    for (let i = 0;\
          \ i < n; i++) {\n        const story = originStory[i]\n        const storyId\
          \ = story.id\n        storyObj[storyId] = story\n    }\n\n    for (let i\
          \ = 0; i < n; i++) {\n      const item = aiBrief[i]\n      const { id, title,\
          \ brief, characters } = item\n      const targetStory = storyObj[id]\n \
          \     \n      if (!targetStory) continue;\n\n      const story = {\n   \
          \     ...targetStory,\n        title, brief, characters\n      }\n     \
          \ storyArr.push(story)\n    }\n\n    return {\n        result: jsonToMarkdownTable(storyArr)\n\
          \    }\n}\n\nfunction jsonToMarkdownTable(jsonData) {\n  if (!Array.isArray(jsonData)\
          \ || jsonData.length === 0) {\n    return \"\"; // Return empty string if\
          \ data is not an array or is empty\n  }\n\n  const headers = Object.keys(jsonData[0]);\n\
          \  let markdownTable = \"| \" + headers.join(\" | \") + \" |\\n\";\n  markdownTable\
          \ += \"| \" + headers.map(() => \"---\").join(\" | \") + \" |\\n\";\n\n\
          \  jsonData.forEach(row => {\n    const values = headers.map(header => {\n\
          \      let value = row[header];\n      // Handle potential complex data\
          \ types (objects/arrays) by stringifying them\n      if (typeof value ===\
          \ 'object' && value !== null) {\n        value = JSON.stringify(value);\n\
          \      }\n      return value;\n    });\n    markdownTable += \"| \" + values.join(\"\
          \ | \") + \" |\\n\";\n  });\n\n  return markdownTable;\n}"
        code_language: javascript
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: json2MdTable
        type: code
        variables:
        - value_selector:
          - '1759479042369'
          - result
          value_type: array[object]
          variable: originStory
        - value_selector:
          - '1759408701421'
          - output
          value_type: array[object]
          variable: aiBrief
      height: 52
      id: '1759479424068'
      position:
        x: 1444.0932425245119
        y: 366
      positionAbsolute:
        x: 1444.0932425245119
        y: 366
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: true
          variable_selector:
          - '1759408701421'
          - item
        isInIteration: true
        isInLoop: false
        iteration_id: '1759408701421'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: ed7f9553-ea43-4c3b-b30f-91113b939aa8
          role: system
          text: '{{#1759408701421.item#}}æ˜¯ä¸€ä¸ªjsonï¼Œå†…å®¹æ˜¯ä¸€ä¸ªæ•…äº‹ã€‚

            åˆ†ä¸ºå¼€å¤´ã€é€’è¿›ã€é«˜æ½®ã€ç»“å°¾å››ä¸ªéƒ¨åˆ†ï¼ˆæ¯ä¸ªéƒ¨åˆ†æ˜¯è¿™ä¸ªjsonçš„ä¸€ä¸ªå­—æ®µï¼‰ã€‚


            ä½ ç»™æˆ‘å†™å‡ºï¼š

            1. æ•…äº‹æ ‡é¢˜ï¼ˆå­—æ®µå: title, ç±»å‹: stringï¼‰

            2. æ•…äº‹ä¸€å¥è¯ç®€ä»‹ï¼ˆå­—æ®µå: brief, ç±»å‹: stringï¼‰

            3. æ•…äº‹çš„è§’è‰²åï¼ˆå­—æ®µå: characters, ç±»å‹: string(è‹¥å¤šä¸ªè§’è‰²ç”¨ ''ã€'' åˆ†éš”)ï¼‰


            æœ€åå°†ç»“æœè¾“å‡ºæˆjsonï¼Œè¦åŒ…å«id, ä¿å­˜åœ¨ storyObj å˜é‡ä¸­'
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              storyObj:
                additionalProperties: false
                properties: {}
                required: []
                type: object
            required: []
            type: object
        structured_output_enabled: true
        title: LLM
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1759481556478'
      parentId: '1759408701421'
      position:
        x: 128
        y: 68
      positionAbsolute:
        x: 1060.8972461089627
        y: 434
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    viewport:
      x: 115.21557477926422
      y: 82.10058009332482
      zoom: 0.633952205891312
  rag_pipeline_variables: []
